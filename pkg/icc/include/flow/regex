#pragma once
#include <regex>
#include <string>
#include <vector>

namespace flow {

    // ---------- match ----------
    inline bool re_match(const std::string& pat, const std::string& s) {
        return std::regex_match(s, std::regex(pat));
    }

    inline bool re_match(const std::string& pat,
                         const std::string& s,
                         std::smatch& m) {
        return std::regex_match(s, m, std::regex(pat));
    }

    // ---------- search ----------
    inline bool re_search(const std::string& pat, const std::string& s) {
        return std::regex_search(s, std::regex(pat));
    }

    inline bool re_search(const std::string& pat,
                          const std::string& s,
                          std::smatch& m) {
        return std::regex_search(s, m, std::regex(pat));
    }

    // ---------- findall ----------
    inline std::vector<std::string>
    re_findall(const std::string& pat, const std::string& s) {
        std::vector<std::string> out;
        std::regex r(pat);

        for (std::sregex_iterator it(s.begin(), s.end(), r);
             it != std::sregex_iterator{};
             ++it) {
            out.push_back(it->str());
        }
        return out;
    }

    // ---------- sub ----------
    inline std::string
    re_sub(const std::string& pat,
           const std::string& repl,
           const std::string& s) {
        return std::regex_replace(s, std::regex(pat), repl);
    }

}

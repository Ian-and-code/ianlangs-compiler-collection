#pragma once
#include <flow/types>
#include <vector>
#include <iostream>
namespace flow {
    class error {
        private:
            bool conditional = false;
            std::vector<flow::str> errors;
        public:
            error(bool conditional = false) {
                this->conditional = conditional;
            }

            error& append(std::string errormsg) {
                errors.push_back(flow::str::fromCppStr(errormsg));
                return *this;
            }

            void raise(int n = 1, bool addLineJump = true) {
                if (errors.size() == 0 && conditional) {
                    return;
                }
                for (auto i : errors)  {
                    std::cerr << i;
                }
                if (addLineJump) std::cerr << "\n";
                if (n >= 0) std::exit(n);
            }
    };

    void raise(std::string msg = "", int n = 1) {
        error err(true);
        err.append(msg).raise(n);
    }

    
}